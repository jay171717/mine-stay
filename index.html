<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Minecraft Bot Manager</title>
  <script src="/socket.io/socket.io.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .bot { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
    .bot button { margin-left: 10px; }
    #addBotForm { margin-bottom: 20px; }
  </style>
</head>
<body>
  <h1>Minecraft Bots (Semi UI)</h1>

  <form id="addBotForm">
    <input type="text" id="botUsername" placeholder="Bot Username" required>
    <button type="submit">Add Bot</button>
  </form>

  <div id="botsContainer"></div>

  <script>
    const socket = io();
    const botsContainer = document.getElementById('botsContainer');

    function renderBots(bots) {
      botsContainer.innerHTML = '';
      bots.forEach(bot => {
        const div = document.createElement('div');
        div.className = 'bot';
        div.innerHTML = `
          <strong>${bot.username}</strong> - ${bot.online ? 'Online' : 'Offline'}<br>
          Position: ${bot.position ? `x:${bot.position.x.toFixed(1)}, y:${bot.position.y.toFixed(1)}, z:${bot.position.z.toFixed(1)}` : 'N/A'}<br>
          Health: ${bot.health} | Hunger: ${bot.food} | XP: ${bot.xp} | Dimension: ${bot.dimension}<br>
          Uptime: ${bot.uptime}s
          <br>
          <button onclick="removeBot('${bot.username}')">Remove</button>
        `;
        botsContainer.appendChild(div);
      });
    }

    socket.on('bots', bots => {
      renderBots(bots);
    });

    document.getElementById('addBotForm').addEventListener('submit', async e => {
      e.preventDefault();
      const username = document.getElementById('botUsername').value;
      await fetch('/add-bot', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username })
      });
      document.getElementById('botUsername').value = '';
    });

    async function removeBot(username) {
      await fetch('/remove-bot', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username })
      });
    }
  </script>
</body>
</html>
